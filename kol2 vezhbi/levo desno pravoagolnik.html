<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<input type="button" onclick="levo()" value="<">
<input type="button" onclick="desno()" value=">">

<script>
    ////////////////////////////////////////////////////////////////////////// kreiranje na pravoagolnicite
  data = '[{"background-color":"red", "width":"100px", "height":"100px"}, {"background-color":"green", "width":"50px", "height":"100px"}, {"background-color":"blue", "width":"100px", "height":"50px"}]';
  data = JSON.parse(data);

  var formi = [];
  var counter = 0;


  for (i = 0; i < data.length; i++) {
    formi[i] = document.createElement('div');
    formi[i].style.backgroundColor = data[i]['background-color'];
    formi[i].style.width = data[i]['width'];
    formi[i].style.height = data[i]['height'];
    formi[i].style.position = "absolute";
  }

  document.body.appendChild(formi[0]);
//////////////////////////////////////////////////////////////////////////////// za na desno
  function desno(){
    interval = setInterval(moveRight, 1);
    idk = setInterval(moveRightLeft, 1);

  }

  function moveRight(){
    var rightNow = formi[counter].style.left.split("px")[0];
    formi[counter].style.left = ++rightNow + "px";
    if(rightNow>1000){
      clearInterval(interval);

      formi[counter].remove();

      counter++;
      if(counter===3)
        counter=0;

      formi[counter].style.left = "-150px";
      document.body.append(formi[counter]);
    }
  }

  function moveRightLeft(){
    var rightNow = formi[counter].style.left.split("px")[0];
    formi[counter].style.left = ++rightNow + "px";
    if(parseInt(rightNow)===5)
      clearInterval(idk);
  }

  //////////////////////////////////////////////////////////////////////////////// za na levo

  function levo(){
    interval = setInterval(moveLeft, 1);
    idk = setInterval(moveLeftRight, 1);
  }

  function moveLeft(){
    var rightNow = formi[counter].style.left.split("px")[0];
    formi[counter].style.left = --rightNow + "px";

    if(rightNow<-150){
      clearInterval(interval);

      formi[counter].remove();

      counter--;
      if(counter===-1)
        counter=2;

      formi[counter].style.left="1000px";
      document.body.append(formi[counter]);
    }
  }

  function moveLeftRight(){
    var rightNow = formi[counter].style.left.split("px")[0];
    formi[counter].style.left = --rightNow + "px";
    if(parseInt(rightNow)===5)
      clearInterval(idk);
  }

</script>

</body>
</html>